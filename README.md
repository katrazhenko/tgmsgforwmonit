# üîç Telegram Monitor Bot

Telegram-–±–æ—Ç –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –Ω–∞ –±–∞–∑—ñ [Telethon](https://github.com/LonamiWebs/Telethon). –°–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:

- **User client** (`main.py`) ‚Äî –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç—å –≥—Ä—É–ø–∏, —Ä–æ–±–∏—Ç—å –±–∞–∑–æ–≤—É —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é, —Å–∫–ª–∞–¥–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–µ—Ä–≥—É
- **Bot client** (`bot.py`) ‚Äî AI-—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ OpenAI / Gemini, –µ–≤—Ä–∏—Å—Ç–∏—á–Ω–∏–π —Å–ø–∞–º-—Ñ—ñ–ª—å—Ç—Ä, –ø–µ—Ä–µ—Å–∏–ª–∫–∞ –≤ –∫–∞–Ω–∞–ª, inline-–∫–Ω–æ–ø–∫–∏, –∞–¥–º—ñ–Ω-–∫–æ–º–∞–Ω–¥–∏

–ü—Ä–∞—Ü—é—î —è–∫ **systemd-—Å–µ—Ä–≤—ñ—Å** `tgmsgforwmonit.service` ‚Äî —É —Ñ–æ–Ω—ñ, –∑ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–æ–º.

---

## üìã –ó–º—ñ—Å—Ç

- [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)
- [–í–∏–º–æ–≥–∏](#–≤–∏–º–æ–≥–∏)
- [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è)
- [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è](#–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
- [Systemd-—Å–µ—Ä–≤—ñ—Å](#systemd-—Å–µ—Ä–≤—ñ—Å)
- [–ö–æ–º–∞–Ω–¥–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è](#–∫–æ–º–∞–Ω–¥–∏-—É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è)
- [–õ–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó](#–ª–æ–≥—ñ–∫–∞-—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ—î–∫—Ç—É)
- [–¢–µ—Å—Ç–∏](#—Ç–µ—Å—Ç–∏)

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
Telegram-–≥—Ä—É–ø–∏
    ‚îÇ
    ‚ñº
main.py (User Client)
    ‚îú‚îÄ‚îÄ Keyword-—Ñ—ñ–ª—å—Ç—Ä
    ‚îú‚îÄ‚îÄ Minus-—Å–ª–æ–≤–∞
    ‚îî‚îÄ‚îÄ –ï–≤—Ä–∏—Å—Ç–∏—á–Ω–∏–π —Å–ø–∞–º-—Ñ—ñ–ª—å—Ç—Ä
            ‚îÇ
      asyncio.Queue
            ‚îÇ
            ‚ñº
bot.py (Bot Client)
    ‚îú‚îÄ‚îÄ AI-—Ñ—ñ–ª—å—Ç—Ä (OpenAI GPT / Gemini)
    ‚îú‚îÄ‚îÄ –ü–µ—Ä–µ—Å–∏–ª–∫–∞ –≤ –∫–∞–Ω–∞–ª
    ‚îú‚îÄ‚îÄ Inline-–∫–Ω–æ–ø–∫–∏ (‚úÖ –¶—ñ–ª—å–æ–≤–µ / üö´ –°–ø–∞–º / ‚Ü©Ô∏è –í—ñ–¥–º—ñ–Ω–∏—Ç–∏)
    ‚îî‚îÄ‚îÄ –ê–¥–º—ñ–Ω-–∫–æ–º–∞–Ω–¥–∏
```

–û–±–∏–¥–≤–∞ –∫–ª—ñ—î–Ω—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å –≤ **–æ–¥–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ**, —Å–ø—ñ–ª–∫—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ `asyncio.Queue`.

---

## –í–∏–º–æ–≥–∏

- Python 3.10+
- Telegram-–∞–∫–∞—É–Ω—Ç (user client) + Bot API token
- API-–∫–ª—é—á—ñ –∑ [my.telegram.org](https://my.telegram.org/apps)
- *(–û–ø—Ü—ñ–π–Ω–æ)* OpenAI API –∫–ª—é—á –¥–ª—è AI-—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó

---

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
git clone https://github.com/your-repo/telegram-monitor-bot.git /opt/tgmsgforwmonit
cd /opt/tgmsgforwmonit
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

---

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –§–∞–π–ª `.env`

```env
TG_API_ID=12345678
TG_API_HASH=your_api_hash_here
TG_PHONE=+1234567890
BOT_TOKEN=123456:ABC-DEF        # –û–ø—Ü—ñ–π–Ω–æ ‚Äî —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
BOT_USERNAME=@your_bot          # Username –±–æ—Ç–∞ (z @)
OPENAI_API_KEY=sk-...           # –û–ø—Ü—ñ–π–Ω–æ ‚Äî –¥–ª—è AI-—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
```

> ‚ö†Ô∏è –ù—ñ–∫–æ–ª–∏ –Ω–µ –¥–æ–¥–∞–≤–∞–π `.env` —É git.

### 2. –ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫

```bash
cd /opt/tgmsgforwmonit
source .venv/bin/activate
python main.py
# –í–≤–µ–¥–∏ –∫–æ–¥ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è ‚Üí Ctrl+C –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç—É
```

–Ø–∫—â–æ `BOT_TOKEN` –Ω–µ –∑–∞–¥–∞–Ω–æ ‚Äî –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ @BotFather.  
–°–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É `data/`.

### 3. `config/config.json`

```json
{
  "keywords": ["keyword1", "keyword2", "keyword phrase"],
  "minus_words": ["spam word", "unwanted phrase"],
  "skip_words": ["the", "a", "an"],
  "forward_channel": "@your_channel",
  "admins": ["@your_username"],
  "join_queue": [],
  "ai_filter_enabled": false,
  "openai_model": "gpt-4o-mini",
  "spam_commercial_triggers": ["\\d{2,}\\s*%", "—Å–∫–∏–¥–∫"],
  "spam_services": ["telegram", "whatsapp"],
  "spam_emojis": "üí∞üî•üéÅ",
  "spam_score_threshold": 4
}
```

| –ü–æ–ª–µ | –û–ø–∏—Å |
|---|---|
| `keywords` | –°–ª–æ–≤–∞/—Ñ—Ä–∞–∑–∏ ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–µ—Ä–µ—Å–∏–ª–∞—î—Ç—å—Å—è |
| `minus_words` | –°—Ç–æ–ø-—Å–ª–æ–≤–∞ ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è |
| `skip_words` | –ê—Ä—Ç–∏–∫–ª—ñ, –ø—Ä–∏–π–º–µ–Ω–Ω–∏–∫–∏ ‚Äî —ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è –ø—Ä–∏ –æ—á–∏—â–µ–Ω–Ω—ñ `minus_words` |
| `forward_channel` | –ö–∞–Ω–∞–ª –∞–±–æ username –¥–ª—è –ø–µ—Ä–µ—Å–∏–ª–∫–∏ |
| `admins` | Username (–∑ `@`) –∑ –ø—Ä–∞–≤–æ–º –Ω–∞ –∫–æ–º–∞–Ω–¥–∏ |
| `ai_filter_enabled` | –£–≤—ñ–º–∫–Ω—É—Ç–∏ GPT-—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é |
| `openai_model` | –ú–æ–¥–µ–ª—å GPT (`gpt-4o-mini` ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ) |
| `spam_commercial_triggers` | Regex-–ø–∞—Ç–µ—Ä–Ω–∏ –¥–ª—è –µ–≤—Ä–∏—Å—Ç–∏—á–Ω–æ–≥–æ —Å–ø–∞–º-—Ñ—ñ–ª—å—Ç—Ä—É |
| `spam_services` | –ù–∞–∑–≤–∏ —Å–µ—Ä–≤—ñ—Å—ñ–≤ –¥–ª—è –µ–≤—Ä–∏—Å—Ç–∏—á–Ω–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä—É |
| `spam_emojis` | –ï–º–æ–¥–∑—ñ, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ñ –¥–ª—è —Å–ø–∞–º—É |
| `spam_score_threshold` | –ü–æ—Ä—ñ–≥ –±–∞–ª—ñ–≤ –¥–ª—è –µ–≤—Ä–∏—Å—Ç–∏—á–Ω–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 4) |

---

## Systemd-—Å–µ—Ä–≤—ñ—Å

### –§–∞–π–ª —Å–µ—Ä–≤—ñ—Å—É

```ini
[Unit]
Description=Telegram Monitor Bot ‚Äî tgmsgforwmonit
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/opt/tgmsgforwmonit
EnvironmentFile=/opt/tgmsgforwmonit/.env
ExecStart=/opt/tgmsgforwmonit/.venv/bin/python main.py
Restart=on-failure
RestartSec=10
StandardOutput=journal
StandardError=journal
ExecStopPost=/bin/rm -f /opt/tgmsgforwmonit/monitor.lock

[Install]
WantedBy=multi-user.target
```

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

| –î—ñ—è | –ö–æ–º–∞–Ω–¥–∞ |
|---|---|
| –°—Ç–∞—Ä—Ç | `sudo systemctl start tgmsgforwmonit` |
| –ó—É–ø–∏–Ω–∫–∞ | `sudo systemctl stop tgmsgforwmonit` |
| –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ | `sudo systemctl restart tgmsgforwmonit` |
| –°—Ç–∞—Ç—É—Å | `sudo systemctl status tgmsgforwmonit` |

### –õ–æ–≥–∏

–§–∞–π–ª–æ–≤—ñ –ª–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `logs/`:

| –§–∞–π–ª | –ó–º—ñ—Å—Ç |
|---|---|
| `logs/user_YYYY-MM-DD.log` | –õ–æ–≥–∏ User client (–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥) |
| `logs/bot_YYYY-MM-DD.log` | –õ–æ–≥–∏ Bot client (–æ–±—Ä–æ–±–∫–∞, AI) |

–ù–æ–≤—ñ —Ñ–∞–π–ª–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –¥–∞—Ç–∏.

```bash
# systemd –ª–æ–≥–∏
sudo journalctl -u tgmsgforwmonit -f

# —Ñ–∞–π–ª–æ–≤—ñ –ª–æ–≥–∏
tail -f /opt/tgmsgforwmonit/logs/user_$(date +%F).log
tail -f /opt/tgmsgforwmonit/logs/bot_$(date +%F).log
```

---

## –ö–æ–º–∞–Ω–¥–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

–ù–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è **–±–æ—Ç—É** –≤—ñ–¥ –∞–¥–º—ñ–Ω–∞ (username –≤ `admins`).  
–ú–µ–Ω—é –∫–æ–º–∞–Ω–¥ –≤–∏–¥–∏–º–µ **—Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤** ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä—à—ñ–π –≤–∑–∞—î–º–æ–¥—ñ—ó.

### ü§ñ AI-—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/ai_enable` | –£–≤—ñ–º–∫–Ω—É—Ç–∏ GPT-—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é |
| `/ai_disable` | –í–∏–º–∫–Ω—É—Ç–∏ |
| `/ai_set_key sk-...` | –ó–∞–¥–∞—Ç–∏ OpenAI API –∫–ª—é—á |
| `/ai_set_model gpt-4o-mini` | –ó–º—ñ–Ω–∏—Ç–∏ –º–æ–¥–µ–ª—å |
| `/ai_set_role <—Ç–µ–∫—Å—Ç>` | –ó–∞–¥–∞—Ç–∏ —Ä–æ–ª—å AI |
| `/ai_get_role` | –ü–æ—Ç–æ—á–Ω–∞ —Ä–æ–ª—å |
| `/ai_set_target <—Ç–µ–∫—Å—Ç>` | –ö—Ä–∏—Ç–µ—Ä—ñ—ó —Ü—ñ–ª—å–æ–≤–æ–≥–æ |
| `/ai_get_target` | –ü–æ—Ç–æ—á–Ω—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó —Ü—ñ–ª—å–æ–≤–æ–≥–æ |
| `/ai_set_spam <—Ç–µ–∫—Å—Ç>` | –ö—Ä–∏—Ç–µ—Ä—ñ—ó —Å–ø–∞–º—É |
| `/ai_get_spam` | –ü–æ—Ç–æ—á–Ω—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó —Å–ø–∞–º—É |
| `/ai_status` | –°—Ç–∞—Ç—É—Å + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∑ –ª–æ–≥—ñ–≤) |
| `/ai_test <—Ç–µ–∫—Å—Ç>` | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –Ω–∞ —Ç–µ–∫—Å—Ç—ñ |


### üõ° –ï–≤—Ä–∏—Å—Ç–∏—á–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/spam_triggers` | –ü–æ–∫–∞–∑–∞—Ç–∏ regex-—Ç—Ä–∏–≥–µ—Ä–∏ |
| `/add_trigger <regex>` | –î–æ–¥–∞—Ç–∏ —Ç—Ä–∏–≥–µ—Ä |
| `/del_trigger <‚Ññ\|—Ç–µ–∫—Å—Ç>` | –í–∏–¥–∞–ª–∏—Ç–∏ |
| `/spam_services` | –ü–æ–∫–∞–∑–∞—Ç–∏ —Å–ø–∞–º-—Å–µ—Ä–≤—ñ—Å–∏ |
| `/add_service <–Ω–∞–∑–≤–∞>` | –î–æ–¥–∞—Ç–∏ —Å–µ—Ä–≤—ñ—Å |
| `/del_service <‚Ññ\|–Ω–∞–∑–≤–∞>` | –í–∏–¥–∞–ª–∏—Ç–∏ |
| `/spam_emojis [—Å–∏–º–≤–æ–ª–∏]` | –ü–æ–∫–∞–∑–∞—Ç–∏ / –∑–∞–¥–∞—Ç–∏ |
| `/spam_threshold [—á–∏—Å–ª–æ]` | –ü–æ–∫–∞–∑–∞—Ç–∏ / –∑–∞–¥–∞—Ç–∏ –ø–æ—Ä—ñ–≥ |

### üì¢ –ö–∞–Ω–∞–ª –ø–µ—Ä–µ—Å–∏–ª–∫–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/set_channel @–∫–∞–Ω–∞–ª` | –ó–∞–¥–∞—Ç–∏ –∫–∞–Ω–∞–ª |
| `/get_channel` | –ü–æ—Ç–æ—á–Ω–∏–π –∫–∞–Ω–∞–ª |
| `/queue_status` | –°—Ç–∞—Ç—É—Å —á–µ—Ä–≥–∏ |

### üîç –ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/add_word <—Å–ª–æ–≤–æ>` | –î–æ–¥–∞—Ç–∏ |
| `/del_word <—Å–ª–æ–≤–æ>` | –í–∏–¥–∞–ª–∏—Ç–∏ |

### üö´ –ú—ñ–Ω—É—Å-—Å–ª–æ–≤–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/add_minus <—Å–ª–æ–≤–æ>` | –î–æ–¥–∞—Ç–∏ |
| `/del_minus <—Å–ª–æ–≤–æ>` | –í–∏–¥–∞–ª–∏—Ç–∏ |
| `/clean_minus` | –û—á–∏—Å—Ç–∏—Ç–∏ –≤—ñ–¥ –¥—É–±–ª—ñ–≤ —Ç–∞ skip/keyword —Å–ª—ñ–≤ |

### ‚è≠Ô∏è Skip-—Å–ª–æ–≤–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/add_skip <—Å–ª–æ–≤–æ>` | –î–æ–¥–∞—Ç–∏ |
| `/del_skip <—Å–ª–æ–≤–æ>` | –í–∏–¥–∞–ª–∏—Ç–∏ |

### üì• –ì—Ä—É–ø–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/join_add @–≥1 @–≥2` | –î–æ–¥–∞—Ç–∏ –≤ —á–µ—Ä–≥—É |
| `/join_del @–≥—Ä—É–ø–∞` | –í–∏–¥–∞–ª–∏—Ç–∏ –∑ —á–µ—Ä–≥–∏ |
| `/join_list` | –ü–æ–∫–∞–∑–∞—Ç–∏ —á–µ—Ä–≥—É |
| `/join_all` | –í—Å—Ç—É–ø–∏—Ç–∏ —É –≤—Å—ñ |
| `/join @–≥—Ä—É–ø–∞` | –í—Å—Ç—É–ø–∏—Ç–∏ –≤ –æ–¥–Ω—É |
| `/leave @–≥—Ä—É–ø–∞` | –í–∏–π—Ç–∏ |

### ‚öôÔ∏è –ó–∞–≥–∞–ª—å–Ω–µ

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---|---|
| `/groups` | –í—Å—ñ –≥—Ä—É–ø–∏/–∫–∞–Ω–∞–ª–∏ –∞–∫–∞—É–Ω—Ç—É |
| `/stats [–¥–Ω—ñ]` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó (—Å—å–æ–≥–æ–¥–Ω—ñ/7/30) |
| `/blocked [–¥–Ω—ñ]` | –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å |
| `/list` | –í—Å—ñ –ø–æ—Ç–æ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è |
| `/help` | –î–æ–≤—ñ–¥–∫–∞ |

### ‚úÖ Inline-–∫–Ω–æ–ø–∫–∏

–ù–∞ –∫–æ–∂–Ω–æ–º—É –ø–µ—Ä–µ—Å–ª–∞–Ω–æ–º—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ:
- **‚úÖ –¶—ñ–ª—å–æ–≤–µ** ‚Äî AI –≤–∏—Ç—è–≥—É—î –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ —Ç–∞ –¥–æ–¥–∞—î –≤ –∫–æ–Ω—Ñ—ñ–≥
- **üö´ –°–ø–∞–º** ‚Äî AI –≤–∏—Ç—è–≥—É—î —Å—Ç–æ–ø-—Å–ª–æ–≤–∞ —Ç–∞ –¥–æ–¥–∞—î –≤ –∫–æ–Ω—Ñ—ñ–≥
- **‚Ü©Ô∏è –í—ñ–¥–º—ñ–Ω–∏—Ç–∏** ‚Äî —Å–∫–∞—Å–æ–≤—É—î –æ—Å—Ç–∞–Ω–Ω—é –¥—ñ—é, –ø–æ–≤–µ—Ä—Ç–∞—î –∫–Ω–æ–ø–∫–∏

---

## –õ–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó

```
–í—Ö—ñ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
        ‚îÇ
        ‚ñº
 –Ñ —Ç–µ–∫—Å—Ç? ‚îÄ‚îÄ‚îÄ‚îÄ –ù—ñ ‚îÄ‚îÄ‚Üí –Ü–ì–ù–û–†
        ‚îÇ
       –¢–∞–∫
        ‚ñº
 –Ñ –º—ñ–Ω—É—Å-—Å–ª–æ–≤–æ? ‚îÄ‚îÄ‚îÄ‚îÄ –¢–∞–∫ ‚îÄ‚îÄ‚Üí –Ü–ì–ù–û–†
        ‚îÇ
        –ù—ñ
        ‚ñº
 –Ñ keyword? ‚îÄ‚îÄ‚îÄ‚îÄ –ù—ñ ‚îÄ‚îÄ‚Üí –Ü–ì–ù–û–†
        ‚îÇ
       –¢–∞–∫
        ‚ñº
 –ï–≤—Ä–∏—Å—Ç–∏—á–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä ‚îÄ‚îÄ‚îÄ‚îÄ –°–ü–ê–ú ‚îÄ‚îÄ‚Üí –Ü–ì–ù–û–† (üõë)
        ‚îÇ
      –ü–†–û–ü–£–°–¢–ò–¢–ò
        ‚ñº
 AI —É–≤—ñ–º–∫–Ω–µ–Ω–æ? ‚îÄ‚îÄ‚îÄ‚îÄ –ù—ñ ‚îÄ‚îÄ‚Üí –ü–ï–†–ï–°–ò–õ–ö–ê + –ö–ù–û–ü–ö–ò
        ‚îÇ
       –¢–∞–∫
        ‚ñº
  GPT: SPAM? ‚îÄ‚îÄ‚îÄ‚îÄ –¢–∞–∫ ‚îÄ‚îÄ‚Üí –Ü–ì–ù–û–† (ü§ñ)
        ‚îÇ
     TARGET
        ‚ñº
   –ü–ï–†–ï–°–ò–õ–ö–ê + –ö–ù–û–ü–ö–ò
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
tgmsgforwmonit/
‚îú‚îÄ‚îÄ main.py                    # User client: –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ + –±–∞–∑–æ–≤–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ bot.py                     # Bot client: AI, –∫–Ω–æ–ø–∫–∏, –∫–æ–º–∞–Ω–¥–∏, –ø–µ—Ä–µ—Å–∏–ª–∫–∞
‚îú‚îÄ‚îÄ index.html                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (–≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞)
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ .env                       # –°–µ–∫—Ä–µ—Ç–∏ (–Ω–µ –≤ git!)
‚îú‚îÄ‚îÄ .env.example               # –ü—Ä–∏–∫–ª–∞–¥ .env
‚îú‚îÄ‚îÄ monitor.lock               # –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–æ–¥–≤—ñ–π–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.json            # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ <phone>.session        # Telethon user —Å–µ—Å—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ bot_session.session    # Telethon bot —Å–µ—Å—ñ—è
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îú‚îÄ‚îÄ user_YYYY-MM-DD.log    # –õ–æ–≥–∏ user client
‚îÇ   ‚îî‚îÄ‚îÄ bot_YYYY-MM-DD.log     # –õ–æ–≥–∏ bot client
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ test_main.py           # –Æ–Ω—ñ—Ç-—Ç–µ—Å—Ç–∏
```

---

## –¢–µ—Å—Ç–∏

```bash
cd /opt/tgmsgforwmonit
source .venv/bin/activate
python -m pytest tests/ -v
```

–ü–æ–∫—Ä–∏–≤–∞—é—Ç—å: `clean_minus_words`, `has_minus_word`, `find_keyword`, `format_sender`, `format_chat`, `is_admin`, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó.

---

## .gitignore

```gitignore
.env
*.session
monitor.lock
logs/
data/
__pycache__/
.venv/
```
